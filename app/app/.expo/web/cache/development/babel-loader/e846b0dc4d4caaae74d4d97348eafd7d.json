{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\marce\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\730-cad-user-api\\\\app\\\\src\\\\pages\\\\Login\\\\index.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext, useState } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useNavigation } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AuthContext } from \"../../contexts/auth\";\nimport { ContainerLogin, Logo, ImageLogo, InputForm, BtnSubmitForm, TxtSubmitForm, LinkNewUser, LoadingArea } from \"../../styles/custom_adm\";\nimport api from \"../../config/api\";\nexport default function Login() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useContext = useContext(AuthContext),\n      signIn = _useContext.signIn;\n\n  var navigation = useNavigation();\n\n  var loginSubmit = function loginSubmit() {\n    return _regeneratorRuntime.async(function loginSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (validate()) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            setLoading(true);\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(api.post('/login', {\n              email: email,\n              password: password\n            }).then(function (response) {\n              AsyncStorage.setItem('@token', response.data.token);\n              AsyncStorage.setItem('@name', response.data.user.name);\n              AsyncStorage.setItem('@image', response.data.user.image);\n              setLoading(false);\n              signIn();\n            }).catch(function (err) {\n              if (err.response) {\n                setLoading(false);\n                Alert.alert(\"\", err.response.data.mensagem);\n              } else {\n                setLoading(false);\n                Alert.alert(\"\", \"Erro: Tente mais tarde!\");\n              }\n            }));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var validate = function validate() {\n    if (!email) {\n      Alert.alert(\"\", \"Erro: Necessário preencher o campo e-mail!\");\n      return false;\n    }\n\n    if (!password) {\n      Alert.alert(\"\", \"Erro: Necessário preencher o campo senha!\");\n      return false;\n    }\n\n    return true;\n  };\n\n  return React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexGrow: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, React.createElement(ContainerLogin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, React.createElement(ImageLogo, {\n    source: require(\"../../../assets/logo.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  })), React.createElement(InputForm, {\n    placeholder: \"E-mail\",\n    autoCorrect: false,\n    value: email,\n    keyboardType: \"email-address\",\n    autoCapitalize: \"none\",\n    editable: !loading,\n    onChangeText: function onChangeText(text) {\n      return setEmail(text);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }), React.createElement(InputForm, {\n    placeholder: \"Senha\",\n    autoCorrect: false,\n    value: password,\n    secureTextEntry: true,\n    editable: !loading,\n    onChangeText: function onChangeText(text) {\n      return setPassword(text);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }), React.createElement(BtnSubmitForm, {\n    disabled: loading,\n    onPress: loginSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, React.createElement(TxtSubmitForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"Acessar\")), React.createElement(LinkNewUser, {\n    onPress: function onPress() {\n      navigation.navigate('NewUser');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Cadastrar\"), React.createElement(LinkNewUser, {\n    onPress: function onPress() {\n      navigation.navigate('RecoverPassword');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Esqueceu a Senha\"), loading && React.createElement(LoadingArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }))));\n}","map":{"version":3,"sources":["C:/Users/marce/OneDrive/Área de Trabalho/730-cad-user-api/app/src/pages/Login/index.js"],"names":["React","useContext","useState","useNavigation","AsyncStorage","AuthContext","ContainerLogin","Logo","ImageLogo","InputForm","BtnSubmitForm","TxtSubmitForm","LinkNewUser","LoadingArea","api","Login","email","setEmail","password","setPassword","loading","setLoading","signIn","navigation","loginSubmit","validate","post","then","response","setItem","data","token","user","name","image","catch","err","Alert","alert","mensagem","flexGrow","require","text","navigate"],"mappings":"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","sourcesContent":["import React, {  useContext ,useState } from \"react\";\r\nimport { ScrollView, Alert, ActivityIndicator } from \"react-native\";\r\n\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport {AuthContext} from '../../contexts/auth';\r\n\r\nimport { ContainerLogin, Logo, ImageLogo, InputForm, BtnSubmitForm, TxtSubmitForm, LinkNewUser, LoadingArea } from '../../styles/custom_adm';\r\n\r\nimport api from '../../config/api';\r\n\r\nexport default function Login() {\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const {signIn} = useContext(AuthContext);\r\n\r\n    const navigation = useNavigation();\r\n\r\n    const loginSubmit = async () => {\r\n\r\n        if (!validate()) return;\r\n\r\n        setLoading(true);\r\n\r\n        await api.post('/login', { email, password })\r\n            .then((response) => {\r\n                //console.log(response.data);\r\n                //Alert.alert(\"\", response.data.mensagem);\r\n                AsyncStorage.setItem('@token', response.data.token);\r\n                AsyncStorage.setItem('@name', response.data.user.name);\r\n                AsyncStorage.setItem('@image', response.data.user.image);\r\n                //AsyncStorage.removeItem('@token');\r\n                setLoading(false);\r\n                signIn();\r\n                //navigation.navigate('Home');\r\n            }).catch((err) => {\r\n                if (err.response) {\r\n                    //console.log(err.response);\r\n                    setLoading(false);\r\n                    Alert.alert(\"\", err.response.data.mensagem);\r\n                } else {\r\n                    setLoading(false);\r\n                    Alert.alert(\"\", \"Erro: Tente mais tarde!\");\r\n                }\r\n            });\r\n    }\r\n\r\n    const validate = () => {\r\n        if (!email) {\r\n            Alert.alert(\"\", \"Erro: Necessário preencher o campo e-mail!\");\r\n            return false;\r\n        }\r\n        if (!password) {\r\n            Alert.alert(\"\", \"Erro: Necessário preencher o campo senha!\");\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    return (\r\n        <ScrollView contentContainerStyle={{ flexGrow: 1 }}>\r\n            <ContainerLogin>\r\n                <Logo>\r\n                    <ImageLogo source={require('../../../assets/logo.png')} />\r\n                </Logo>\r\n\r\n                <InputForm\r\n                    placeholder=\"E-mail\"\r\n                    autoCorrect={false}\r\n                    value={email}\r\n                    keyboardType=\"email-address\"\r\n                    autoCapitalize=\"none\"\r\n                    editable={!loading}\r\n                    onChangeText={text => setEmail(text)}\r\n                />\r\n\r\n                <InputForm\r\n                    placeholder=\"Senha\"\r\n                    autoCorrect={false}\r\n                    value={password}\r\n                    secureTextEntry={true}\r\n                    editable={!loading}\r\n                    onChangeText={text => setPassword(text)}\r\n                />\r\n\r\n                <BtnSubmitForm disabled={loading} onPress={loginSubmit} >\r\n                    <TxtSubmitForm>\r\n                        Acessar\r\n                    </TxtSubmitForm>\r\n                </BtnSubmitForm>\r\n\r\n                <LinkNewUser onPress={() => { navigation.navigate('NewUser') }}>\r\n                    Cadastrar\r\n                </LinkNewUser>\r\n\r\n                <LinkNewUser onPress={() => { navigation.navigate('RecoverPassword') }}>\r\n                    Esqueceu a Senha\r\n                </LinkNewUser>\r\n\r\n                {loading &&\r\n                    <LoadingArea>\r\n                        <ActivityIndicator size=\"large\" color=\"#fff\" />\r\n                    </LoadingArea>\r\n                }\r\n            </ContainerLogin>\r\n        </ScrollView>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}